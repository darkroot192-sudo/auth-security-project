{% extends "base.html" %}

{% block content %}
<h2> Perfil de Usuario</h2>

{% if user %}
<div style="background: rgba(54, 123, 245, 0.1); padding: 1.5rem; border-radius: 10px; border: 2px solid #367bf5;">
    <p style="margin-bottom: 0.8rem; color: #b8c5d6;"><strong>ID:</strong> {{ user.id }}</p>
    <p style="margin-bottom: 0.8rem; color: #b8c5d6;"><strong>Usuario:</strong> <span style="color: #367bf5;">{{ user.username }}</span></p>
    <p style="margin-bottom: 0.8rem; color: #b8c5d6;"><strong>Email:</strong> {{ user.email }}</p>
    <p style="margin-bottom: 0.8rem; color: #b8c5d6;"><strong>Rol:</strong> <span style="color: #28a745; font-weight: bold;">{{ user.role }}</span></p>
    <p style="color: #b8c5d6;"><strong>Creado:</strong> {{ user.created_at }}</p>
    
    <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(40, 167, 69, 0.1); border-radius: 8px; border-left: 4px solid #28a745;">
        <strong style="color: #28a745;"> Contraseña:</strong> 
        <span style="color: #b8c5d6;">Hasheada con Bcrypt (No visible)</span>
    </div>
</div>

<div class="security-info" style="margin-top: 2rem; font-size: 0.9rem;">
    <strong> Protección IDOR Activa:</strong>
    <br>• Solo puedes ver tu propio perfil
    <br>• Los administradores pueden ver todos los perfiles
    <br>• Validación de autorización en servidor
    <br>• Prepared statements contra SQL Injection
    <br><br>
    Intenta cambiar <code>?id=2</code> en la URL.
    <br>Recibirás: "No tienes permiso para ver este perfil"
</div>
{% else %}
<p style="color: #dc3545; font-weight: bold;">Usuario no encontrado.</p>
{% endif %}

<a href="/dashboard" style="display: inline-block; margin-top: 1rem; color: #367bf5; font-weight: bold; text-decoration: none;">← Volver al Dashboard</a>
{% endblock %}
